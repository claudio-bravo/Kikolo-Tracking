!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).duDatepicker=t()}(this,function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,a,n,r,i,o){v(this,s),this.months=e,this.shortMonths=t||this.months.map(function(e){return e.substr(0,3)}),this.days=a,this.shortDays=n||this.days.map(function(e){return e.substr(0,3)}),this.shorterDays=r||this.days.map(function(e){return e.substr(0,2)}),this.firstDay=i,this.dict=w.extend(y,o)}var w={appendTo:function(e,t,a){Array.isArray(e)?e.forEach(function(e){0===a?t.insertBefore(e,t.childNodes[a]||null):t.appendChild(e)}):0===a?t.insertBefore(e,t.childNodes[a]||null):t.appendChild(e)},addEvent:function(e,t,a){function n(e,t,a){e.addEventListener(t,a,!1)}Array.isArray(e)?e.forEach(function(e){n(e,t,a)}):n(e,t,a)},removeEvent:function(e,t,a){function n(e,t,a){e.removeEventListener(t,a,!1)}Array.isArray(e)?e.forEach(function(e){n(e,t,a)}):n(e,t,a)},empty:function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},createElem:function(e,t,a,n){var r=document.createElement(e);return void 0!==a&&(r[n?"innerHTML":"innerText"]=a),void 0!==t&&w.setAttributes(r,t),r},setAttributes:function(e,t){for(var a in t)e.setAttribute(a,t[a])},setStyles:function(e,t){for(var a in t)e.style[a]=t[a]},getDaysCount:function(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()},dateDiff:function(e,t){return Math.round((t-e)/864e5)},screenDim:function(){var e=document.documentElement;return{height:Math.max(e.offsetHeight,e.clientHeight),width:Math.max(e.offsetWidth,e.clientWidth)}},calcOffset:function(e){var t=document.documentElement||document.body,a=e.getBoundingClientRect(),n={top:a.top+t.scrollTop,left:a.left+t.scrollLeft},r=e.offsetHeight,i=e.offsetWidth,o=w.screenDim();return{top:n.top+r,left:n.left,right:o.width-(n.left+i),bottom:o.height-n.top}},extend:function(e){var a={},n=!1,t=0,r=arguments.length;"[object Boolean]"===Object.prototype.toString.call(e)&&(n=e,t++);for(;t<r;t++){!function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n&&"[object Object]"===Object.prototype.toString.call(e[t])?a[t]=w.extend(!0,a[t],e[t]):a[t]=e[t])}(arguments[t])}return a},formatDate:function(e,t){var a=new Date(e),n=a.getDate(),r=a.getMonth(),i=a.getFullYear(),o=this.config.i18n,s=r+1;return t.replace(/(yyyy|yy|mmmm|mmm|mm|m|DD|D|dd|d)/g,function(e){switch(e){case"d":return n;case"dd":return("00"+n).slice(-2);case"D":return o.shortDays[a.getDay()];case"DD":return o.days[a.getDay()];case"m":return s;case"mm":return("00"+s).slice(-2);case"mmm":return o.shortMonths[r];case"mmmm":return o.months[r];case"yy":return i.toString().substr(2,2);case"yyyy":return i}})},parseDate:function(t,e){var a,n,r,i,o=void 0===e?this.config.format:e,s=(o.match(/d/g)||[]).length,l=(o.match(/m/g)||[]).length,d=(o.match(/y/g)||[]).length,c=4===l,_=1===l,u=1===s,p=t.length,m=o.indexOf("m"),f=o.indexOf("d"),g=o.indexOf("y"),h="",v="",y="",w=-1;return""===t?{m:null,d:null,y:null,date:new Date("")}:(c?(w=this.config.i18n.months.findIndex(function(e){return 0<=t.indexOf(e)}),h=this.config.i18n.months[w],f=(o=o.replace("mmmm",h)).indexOf("d"),g=g<m?o.indexOf("y"):o.indexOf("y",o.indexOf(h)+h.length)):h=!u&&!_||u&&!_&&m<f?t.substr(m,l):(a=o.lastIndexOf("m"),n=o.substring(m-1,m),r=o.substring(a+1,a+2),a===o.length-1?t.substring(t.indexOf(n,m-1)+1,p):0===m?t.substring(0,t.indexOf(r,m)):t.substring(t.indexOf(n,m-1)+1,t.indexOf(r,m+1))),{m:h,d:v=!u&&!_||!u&&_&&f<m?t.substr(f,s):(i=o.lastIndexOf("d"),n=o.substring(f-1,f),r=o.substring(i+1,i+2),i===o.length-1?t.substring(t.indexOf(n,f-1)+1,p):0===f?t.substring(0,t.indexOf(r,f)):t.substring(t.indexOf(n,f-1)+1,t.indexOf(r,f+1))),y:y=!_&&!u||_&&u&&g<m&&g<f||!_&&u&&g<f||_&&!u&&g<m?t.substr(g,d):(n=o.substring(g-1,g),t.substr(t.indexOf(n,g-1)+1,d)),date:new Date(y,isNaN(parseInt(h))?w:h-1,v)})},triggerChange:function(e,t){e.dispatchEvent(new Event("change")),e.dispatchEvent(new Event("onchange")),e.dispatchEvent(new function(e){var t=document.createEvent("CustomEvent");return t.initCustomEvent("datechanged",!1,!1),t.data=e,t}(t))},daysOfWeekDOM:function(){for(var e=this.config,t=e.i18n,a=[],n=0,r=e.firstDay||t.firstDay;n<t.shorterDays.length;n++,r++)a.push(t.shorterDays[r%7]);return"<span>".concat(a.join("</span><span>"),"</span>")},jsonToDate:function(e){return new Date(e.year,e.month,e.date)},dateToJson:function(e){return e?{year:e.getFullYear(),month:e.getMonth(),date:e.getDate()}:null},isElement:function(e){return e instanceof Element}},y={btnOk:"OK",btnCancel:"CANCEL",btnClear:"CLEAR"},e={Locale:s,en:new s("Janeiro_Fevereiro_Março_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),null,"Domingo_Segunda_Terça_Quarta_Quinta_Sexta_Sabado".split("_"),null,null,7),ru:new s("январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_"),"янв._февр._мар._апр._мая_июня_июля_авг._сент._окт._нояб._дек.".split("_"),"воскресенье_понедельник_вторник_среда_четверг_пятница_суббота".split("_"),"вс_пн_вт_ср_чт_пт_сб".split("_"),"вс_пн_вт_ср_чт_пт_сб".split("_"),1,{btnCancel:"Отменить",btnClear:"очищать"}),es:new s("enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),null,"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),"dom._lun._mar._mié._jue._vie._sáb.".split("_"),null,1,{btnCancel:"Cancelar",btnClear:"Despejar"}),tr:new s("Ocak_Şubat_Mart_Nisan_Mayıs_Haziran_Temmuz_Ağustos_Eylül_Ekim_Kasım_Aralık".split("_"),null,"Pazar_Pazartesi_Salı_Çarşamba_Perşembe_Cuma_Cumartesi".split("_"),"Paz_Pts_Sal_Çar_Per_Cum_Cts".split("_"),"Pz_Pt_Sa_Ça_Pe_Cu_Ct".split("_"),1),fa:new s("ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر".split("_"),"ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر".split("_"),"یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنج‌شنبه_جمعه_شنبه".split("_"),"یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنج‌شنبه_جمعه_شنبه".split("_"),"ی_د_س_چ_پ_ج_ش".split("_"),1),fr:new s("janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),"dim._lun._mar._mer._jeu._ven._sam.".split("_"),"di_lu_ma_me_je_ve_sa".split("_"),1,{btnCancel:"Abandonner",btnClear:"Effacer"}),de:new s("Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),"Jan._Feb._März_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),1,{btnCancel:"Stornieren",btnClear:"Löschen"}),ja:new s("一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),"日曜日_月曜日_火曜日_水曜日_木曜日_金曜日_土曜日".split("_"),"日曜_月曜_火曜_水曜_木曜_金曜_土曜".split("_"),"日_月_火_水_木_金_土".split("_"),7),pt:new s ("janeiro_fevereiro_março_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),null,"Domingo_Segunda-feira_Terça-feira_Quarta-feira_Quinta-feira_Sexta-feira_Sábado".split("_"),"Dom_Seg_Ter_Qua_Qui_Sex_Sáb".split("_"),"Do_2ª_3ª_4ª_5ª_6ª_Sá".split("_"),1,{btnCancel:"Cancelar",btnClear:"Clarear"}),vi:new s("tháng 1_tháng 2_tháng 3_tháng 4_tháng 5_tháng 6_tháng 7_tháng 8_tháng 9_tháng 10_tháng 11_tháng 12".split("_"),"Thg 01_Thg 02_Thg 03_Thg 04_Thg 05_Thg 06_Thg 07_Thg 08_Thg 09_Thg 10_Thg 11_Thg 12".split("_"),"chủ nhật_thứ hai_thứ ba_thứ tư_thứ năm_thứ sáu_thứ bảy".split("_"),"CN_T2_T3_T4_T5_T6_T7".split("_"),"CN_T2_T3_T4_T5_T6_T7".split("_"),1),zh:new s("一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),"周日_周一_周二_周三_周四_周五_周六".split("_"),"日_一_二_三_四_五_六".split("_"),1)},b=[9,112,113,114,115,116,117,118,119,120,121,122,123],l="_duDatepicker",d=".duDatepicker-input",D={value:null,format:"mm/dd/yyyy",outFormat:null,theme:"blue",auto:!1,inline:!1,clearBtn:!1,cancelBtn:!1,overlayClose:!0,disabledDates:[],disabledDays:[],range:!1,rangeDelim:"-",fromTarget:null,toTarget:null,events:{dateChanged:null,onRangeFormat:null,ready:null,shown:null,hidden:null},i18n:e.en,firstDay:null,root:"body"},c=function(){function h(e,t){v(this,h);var a=this,n=t.i18n;"string"==typeof n&&(t.i18n=T.i18n[n]),this.config=w.extend(D,t);var r=this.config.root;"string"==typeof r?this.config.root=document.querySelector(r):w.isElement(r)||delete this.config.root,this.animating=!1,this.visible=!1,this.input=e,this.input.readOnly=!0,this.fromEl=document.querySelector(this.config.fromTarget),this.toEl=document.querySelector(this.config.toTarget),this.input.hidden=this.config.range&&(this.fromEl||this.toEl),this.viewMode="calendar",this.dict=w.extend(y,this.config.i18n.dict),this.datepicker={container:w.createElem("div",{class:"dcalendarpicker"}),wrapper:w.createElem("div",{class:"dudp__wrapper",tabindex:0}),header:{wrapper:w.createElem("section",{class:"dudp__calendar-header"}),selectedYear:w.createElem("span",{class:"dudp__sel-year"}),selectedDate:w.createElem("span",{class:"dcp_sel-date"})},calendarHolder:{wrapper:w.createElem("section",{class:"dudp__cal-container"}),btnPrev:w.createElem("span",{class:"dudp__btn-cal-prev",role:"button"},"&lsaquo;",!0),btnNext:w.createElem("span",{class:"dudp__btn-cal-next",role:"button"},"&rsaquo;",!0),calendarViews:{wrapper:w.createElem("div",{class:"dudp__calendar-views"}),calendars:[]},yearsView:w.createElem("div",{class:"dudp__years-view dp__hidden"}),monthsView:w.createElem("div",{class:"dudp__months-view dp__hidden"}),buttons:{wrapper:w.createElem("div",{class:"dudp__buttons"}),btnClear:w.createElem("span",{class:"dudp__button clear",role:"button"},a.dict.btnClear),btnCancel:w.createElem("span",{class:"dudp__button cancel",role:"button"},a.dict.btnCancel),btnOk:w.createElem("span",{class:"dudp__button ok",role:"button"},a.dict.btnOk)}}},a.config.value&&(a.input.value=a.config.value,a.input.setAttribute("value",a.config.value)),this.minDate=a.input.dataset.mindate||a.config.minDate,this.maxDate=a.input.dataset.maxdate||a.config.maxDate;var i=new Date;if(a.config.range){var o=a.input.value,s=o.split(a.config.rangeDelim);if(""!==o&&s.length<2)throw new Error("duDatePicker: Invalid date range value");var l,d,c,_,u,p=""===o?null:w.parseDate.call(a,s[0]).date,m=""===o?null:w.parseDate.call(a,s[1]).date;this.dateFrom=p,this.dateTo=m,this.rangeFrom=null,this.rangeTo=null,this.viewMonth=(p||i).getMonth(),this.viewYear=(p||i).getFullYear(),o&&(l=a.config.events&&a.config.events.onRangeFormat?a.formatRange(p,m):o,d=w.formatDate.call(a,p,a.config.format),c=w.formatDate.call(a,p,a.config.outFormat||a.config.format),_=w.formatDate.call(a,m,a.config.format),u=w.formatDate.call(a,m,a.config.outFormat||a.config.format),a.input.value=l,w.setAttributes(a.input,{value:l,"data-range-from":c,"data-range-to":u}),a.fromEl&&(a.fromEl.value=d,w.setAttributes(a.fromEl,{value:d,"data-value":c})),a.toEl&&(a.toEl.value=_,w.setAttributes(a.toEl,{value:d,"data-value":u})))}else this.date=""===a.input.value?i:w.parseDate.call(a,a.input.value).date,this.selected=w.dateToJson(a.date),this.viewMonth=a.selected.month,this.viewYear=a.selected.year;function f(){a.showInFromEl=a.config.inline&&a.fromEl&&this===a.fromEl,a.showInToEl=a.config.inline&&a.toEl&&this===a.toEl,a.show()}function g(e){return 13===e.keyCode&&(a.showInFromEl=a.config.inline&&a.fromEl&&this===a.fromEl,a.showInToEl=a.config.inline&&a.toEl&&this===a.toEl,a.show()),!(b.indexOf(e.which)<0)}this._unbindInput=function(){a.input.readOnly=!1,a.input.removeEventListener("click",f),a.input.removeEventListener("keydown",g),a.fromEl&&(a.fromEl.readOnly=!1,a.fromEl.removeEventListener("click",f),a.fromEl.removeEventListener("keydown",g)),a.toEl&&(a.toEl.readOnly=!1,a.toEl.removeEventListener("click",f),a.toEl.removeEventListener("keydown",g))},w.addEvent(a.input,"click",f),w.addEvent(a.input,"keydown",g),a.fromEl&&(a.fromEl.readOnly=!0,w.addEvent(a.fromEl,"click",f),w.addEvent(a.fromEl,"keydown",g)),a.toEl&&(a.toEl.readOnly=!0,w.addEvent(a.toEl,"click",f),w.addEvent(a.toEl,"keydown",g)),this._init(),this._setSelection()}var e,t,a;return e=h,(t=[{key:"_init",value:function(){var n=this,e=n.datepicker,t=e.header,a=e.calendarHolder,r=a.buttons,i=n.selected?n.selected:new Date;n.config.inline||(w.appendTo([t.selectedYear,t.selectedDate],t.wrapper),w.appendTo(t.wrapper,e.wrapper),w.addEvent(t.selectedYear,"click",function(){"years"!==n.viewMode&&n._switchView("years")}),w.addEvent(t.selectedDate,"click",function(){var e=new Date,t=n.config.range?e.getMonth():n.selected.month,a=n.config.range?e.getFullYear():n.selected.year;n.viewMonth===t&&n.viewYear===a&&"calendar"===n.viewMode||(n.viewMonth=t,n.viewYear=a,n._setupCalendar(),n._switchView("calendar"))}));for(var o=0,s=1;s<4;s++){for(var l=w.createElem("div",{class:"dudp__month-row"}),d=0;d<4;d++){var c=w.createElem("span",{class:"dudp__month"});o===i.month&&c.classList.add("selected"),c.innerText=n.config.i18n.shortMonths[o],c.dataset.month=o,w.appendTo(c,l),w.addEvent(c,"click",function(e){var t=this.dataset.month;n.viewMonth=t,n._setupCalendar(),n._switchView("calendar")}),o++}w.appendTo(l,a.monthsView)}w.appendTo(n._getYears(),a.yearsView),n.config.clearBtn&&w.appendTo(r.btnClear,r.wrapper),n.config.cancelBtn&&w.appendTo(r.btnCancel,r.wrapper),n.config.auto&&!n.config.range||w.appendTo(r.btnOk,r.wrapper),w.appendTo([a.btnPrev,a.btnNext,a.calendarViews.wrapper,a.monthsView,a.yearsView,r.wrapper],a.wrapper),w.appendTo(a.wrapper,e.wrapper),w.appendTo(e.wrapper,e.container),w.appendTo(e.container,n.config.root),n.config.inline&&e.container.setAttribute("inline",!0),e.wrapper.dataset.theme=n.input.dataset.theme||n.config.theme,w.addEvent(e.wrapper,"keydown",function(e){27===e.keyCode?n.hide():37===e.keyCode?n._move("prev"):39===e.keyCode&&n._move("next")}),n.config.inline&&w.addEvent(e.wrapper,"blur",function(){n.hide()}),w.addEvent(a.btnPrev,"click",function(){n._move("prev")}),w.addEvent(a.btnNext,"click",function(){n._move("next")}),w.addEvent(a.calendarViews.wrapper,"click",function(e){e.target.classList.contains("cal-year")?n._switchView("years"):e.target.classList.contains("cal-month")&&n._switchView("months")}),n.config.clearBtn&&w.addEvent(r.btnClear,"click",function(){n.setValue(""),n.hide()}),n.config.overlayClose&&(w.addEvent(e.container,"click",function(){n.hide()}),w.addEvent(e.wrapper,"click",function(e){e.stopPropagation()})),n.config.cancelBtn&&w.addEvent(r.btnCancel,"click",function(){n.hide()}),w.addEvent(r.btnOk,"click",function(){if(n.config.range){if(!n.rangeFrom||!n.rangeTo)return;var e=w.jsonToDate(n.rangeFrom),t=w.jsonToDate(n.rangeTo);if(n._dateDisabled(e)||n._dateDisabled(t))return;n.dateFrom=e,n.dateTo=t,n.setValue([w.formatDate.call(n,e,n.config.format),w.formatDate.call(n,t,n.config.format)].join(n.config.rangeDelim))}else{var a=w.jsonToDate(n.selected);if(n._dateDisabled(a))return;n.date=a,n.setValue(n.date)}n.hide()}),n.config.events&&n.config.events.ready&&n.config.events.ready.call(n,n)}},{key:"_inRange",value:function(e){if(!this.config.range)return!1;var t=this.rangeFrom?w.jsonToDate(this.rangeFrom):null,a=this.rangeTo?w.jsonToDate(this.rangeTo):null;return t&&t<e&&a&&e<a}},{key:"_dateDisabled",value:function(t){var a=this,e=null,n=null,r=new Date,i=new Date(r.getFullYear(),r.getMonth(),r.getDate()),o=a.config.disabledDates,s=a.config.disabledDays,l=0<o.filter(function(e){return 0<=e.indexOf("-")?t>=w.parseDate.call(a,e.split("-")[0]).date&&t<=w.parseDate.call(a,e.split("-")[1]).date:w.parseDate.call(a,e).date.getTime()===t.getTime()}).length,d=0<=s.indexOf(a.config.i18n.days[t.getDay()])||0<=s.indexOf(a.config.i18n.shortDays[t.getDay()])||0<=s.indexOf(a.config.i18n.shorterDays[t.getDay()]);return a.minDate&&(e="today"===a.minDate?i:new Date(a.minDate)),a.maxDate&&(n="today"===a.maxDate?i:new Date(a.maxDate)),e&&t<e||n&&n<t||l||d}},{key:"_getDates",value:function(r,i){for(var d=this,a=1,e=new Date,o=new Date(e.getFullYear(),e.getMonth(),e.getDate()),s=d.config.range?null:w.jsonToDate(d.selected),l=d.rangeFrom?w.jsonToDate(d.rangeFrom):null,c=d.rangeTo?w.jsonToDate(d.rangeTo):null,n=new Date(r,i,a),t=w.getDaysCount(n),_=1,u=[],p=d.config.firstDay||d.config.i18n.firstDay,m=(p+6)%7,f=1;f<=6;f++){for(var g=[],h=0,v=p;h<7;h++,v++)g.push(w.createElem("span",{class:"dudp__date","data-dow":v%7}));for(;a<=t;){if("break"===function(){n.setDate(a);var t=n.getDay(),e=g.find(function(e){return parseInt(e.dataset.dow)===t});return e.dataset.date=a,e.dataset.month=i,e.dataset.year=r,n.getTime()===o.getTime()&&e.classList.add("current"),d._dateDisabled(n)&&e.classList.add("disabled"),d._inRange(n)&&e.classList.add("in-range"),d.config.range||n.getTime()!==s.getTime()||e.classList.add("selected"),d.config.range&&l&&n.getTime()===l.getTime()&&e.classList.add("range-from"),d.config.range&&c&&n.getTime()===c.getTime()&&e.classList.add("range-to"),1===f&&t===p%7?"break":t===m?(e.innerText=a++,"break"):void(e.innerText=a++)}())break}(1===f||4<f)&&(1===f?function(){for(var t=new Date(r,i-1,1),e=w.getDaysCount(t),a=1;a<=7;a++){t.setDate(e--);var n=g.find(function(e){return parseInt(e.dataset.dow)===t.getDay()});""===n.innerText&&(n.dataset.date=t.getDate(),n.dataset.month=t.getMonth(),n.dataset.year=t.getFullYear(),n.innerText=t.getDate(),n.classList.add("dudp__pm"),d._dateDisabled(t)&&n.classList.add("disabled"),d._inRange(t)&&n.classList.add("in-range"),t.getTime()===o.getTime()&&n.classList.add("current"),d.config.range||t.getTime()!==s.getTime()||n.classList.add("selected"),d.config.range&&l&&t.getTime()===l.getTime()&&n.classList.add("range-from"),d.config.range&&c&&t.getTime()===c.getTime()&&n.classList.add("range-to"))}}():4<f&&function(){for(var t=new Date(r,i+1,1),e=1;e<=7;e++){t.setDate(_);var a=g.find(function(e){return parseInt(e.dataset.dow)===t.getDay()});""===a.innerText&&(_++,a.dataset.date=t.getDate(),a.dataset.month=t.getMonth(),a.dataset.year=t.getFullYear(),a.innerText=t.getDate(),a.classList.add("dudp__nm"),d._dateDisabled(t)&&a.classList.add("disabled"),d._inRange(t)&&a.classList.add("in-range"),t.getTime()===o.getTime()&&a.classList.add("current"),d.config.range||t.getTime()!==s.getTime()||a.classList.add("selected"),d.config.range&&l&&t.getTime()===l.getTime()&&a.classList.add("range-from"),d.config.range&&c&&t.getTime()===c.getTime()&&a.classList.add("range-to"))}}()),u.push(g)}var y=[];return u.forEach(function(e){for(var t=w.createElem("div",{class:"dudp__cal-week"}),a=0;a<e.length;a++){var n=e[a];w.addEvent(n,"click",function(){var e,t,i=this.dataset.year,o=this.dataset.month,s=this.dataset.date,a=new Date(i,o,s),l=!1;d._dateDisabled(a)||(d.config.range?(e=d.rangeFrom?w.jsonToDate(d.rangeFrom):null,t=d.rangeTo?w.jsonToDate(d.rangeTo):null,!d.rangeFrom||d.rangeFrom&&a<e||d.rangeFrom&&d.rangeTo&&w.dateDiff(e,a)<=w.dateDiff(a,t)&&0!==w.dateDiff(e,a)||d.rangeFrom&&d.rangeTo&&t.getTime()===a.getTime()?(d.rangeFrom={year:i,month:o,date:s},l=!0):(!d.rangeTo||d.rangeTo&&t<a||d.rangeFrom&&d.rangeTo&&w.dateDiff(a,t)<w.dateDiff(e,a)&&0!==w.dateDiff(a,t)||d.rangeFrom&&d.rangeTo&&e.getTime()===a.getTime())&&(d.rangeTo={year:i,month:o,date:s},l=!1),d.datepicker.calendarHolder.calendarViews.wrapper.querySelectorAll(".dudp__date").forEach(function(e){var t=e.dataset.year,a=e.dataset.month,n=e.dataset.date,r=d._inRange(new Date(t,a,n));e.classList[i===t&&o===a&&s===n?"add":"remove"](l?"range-from":"range-to"),e.classList[r?"add":"remove"]("in-range")})):(d.datepicker.calendarHolder.calendarViews.wrapper.querySelectorAll(".dudp__date").forEach(function(e){var t=e.dataset.year,a=e.dataset.month,n=e.dataset.date;e.classList[i===t&&o===a&&s===n?"add":"remove"]("selected")}),this.classList.add("selected"),d.selected={year:i,month:o,date:s},d._setSelection(),d.config.auto&&(d.date=a,d.setValue(d.date),d.hide())),d.datepicker.calendarHolder.wrapper.querySelectorAll(".dudp__month").forEach(function(e){var t=e.dataset.month;e.classList[t===o?"add":"remove"]("selected")}))}),w.appendTo(n,t)}y.push(t)}),y}},{key:"_getYears",value:function(){for(var t=this,e=t.viewYear-50,a=t.viewYear+25,n=[],r=e;r<=a;r++){var i=w.createElem("span",{class:"dudp__year"});r===t.viewYear&&i.classList.add("selected"),i.innerText=r,i.dataset.year=r,w.addEvent(i,"click",function(){var e=parseInt(this.dataset.year);t.viewYear=e,t.config.range||(t.selected.year=e),t._setSelection(),t._setupCalendar(),t._switchView("calendar")}),n.push(i)}return n}},{key:"_setupCalendar",value:function(){var e=this,t=e.datepicker.calendarHolder.calendarViews,a=+e.viewYear,n=+e.viewMonth;t.calendars.length=0;var r={wrapper:w.createElem("div",{class:"dudp__calendar"}),header:w.createElem("div",{class:"dudp__cal-month-year"}),weekDays:w.createElem("div",{class:"dudp__weekdays"},w.daysOfWeekDOM.call(e),!0),datesHolder:w.createElem("div",{class:"dudp__dates-holder"})},i={wrapper:w.createElem("div",{class:"dudp__calendar"}),header:w.createElem("div",{class:"dudp__cal-month-year"}),weekDays:w.createElem("div",{class:"dudp__weekdays"},w.daysOfWeekDOM.call(e),!0),datesHolder:w.createElem("div",{class:"dudp__dates-holder"})},o={wrapper:w.createElem("div",{class:"dudp__calendar"}),header:w.createElem("div",{class:"dudp__cal-month-year"}),weekDays:w.createElem("div",{class:"dudp__weekdays"},w.daysOfWeekDOM.call(e),!0),datesHolder:w.createElem("div",{class:"dudp__dates-holder"})},s=0==n?11:n-1,l=11==n?0:1+n,d=0==n?a-1:a,c=11==n?1+a:a;w.appendTo([w.createElem("span",{class:"cal-month"},e.config.i18n.months[s]),w.createElem("span",{class:"cal-year"},d)],i.header),w.appendTo(e._getDates(d,s),i.datesHolder),w.appendTo([i.header,i.weekDays,i.datesHolder],i.wrapper),t.calendars.push(i),w.appendTo([w.createElem("span",{class:"cal-month"},e.config.i18n.months[n]),w.createElem("span",{class:"cal-year"},a)],r.header),w.appendTo(e._getDates(a,n),r.datesHolder),w.appendTo([r.header,r.weekDays,r.datesHolder],r.wrapper),t.calendars.push(r),w.appendTo([w.createElem("span",{class:"cal-month"},e.config.i18n.months[l]),w.createElem("span",{class:"cal-year"},c)],o.header),w.appendTo(e._getDates(c,l),o.datesHolder),w.appendTo([o.header,o.weekDays,o.datesHolder],o.wrapper),t.calendars.push(o),w.empty(t.wrapper),w.appendTo([i.wrapper,r.wrapper,o.wrapper],t.wrapper)}},{key:"_switchView",value:function(e){if("calendar"===e||"months"===e||"years"===e){var t=this,a=t.datepicker,n=a.calendarHolder.monthsView,r=a.calendarHolder.yearsView,i=a.calendarHolder.calendarViews.wrapper,o=a.calendarHolder.buttons.wrapper,s=t.viewMode,l="dp__hidden";switch(t.viewMode=e,t.viewMode){case"calendar":var d=i.querySelector(".dudp__calendar:nth-child(2)");i.classList.add("dp__animate-out"),i.classList.remove(l),"calendar"!==s&&d.classList.add("dp__zooming","dp__animate-zoom"),a.calendarHolder.btnPrev.classList.remove(l),a.calendarHolder.btnNext.classList.remove(l),o.classList.remove(l),setTimeout(function(){i.classList.remove("dp__animate-out"),"calendar"!==s&&d.classList.remove("dp__animate-zoom")},10),n.classList.add("dp__animate-out"),r.classList.add(l),setTimeout(function(){"calendar"!==s&&d.classList.remove("dp__zooming"),n.classList.add(l),n.classList.remove("dp__animate-out")},250);break;case"months":a.calendarHolder.btnPrev.classList.add(l),a.calendarHolder.btnNext.classList.add(l),o.classList.add(l),i.classList.add("dp__animate-out"),n.classList.add("dp__animate-out"),n.classList.remove(l),setTimeout(function(){n.classList.remove("dp__animate-out")},10),setTimeout(function(){i.classList.add(l),i.classList.remove("dp__animate-out")},250);break;case"years":w.empty(r),w.appendTo(t._getYears(),r);var c=r.querySelector(".dudp__year.selected");r.scrollTop=c.offsetTop-120,a.calendarHolder.btnPrev.classList.add(l),a.calendarHolder.btnNext.classList.add(l),o.classList.add(l),n.classList.add("dp__animate-out"),i.classList.add("dp__animate-out"),r.classList.remove(l),setTimeout(function(){i.classList.add(l),i.classList.remove("dp__animate-out"),n.classList.add(l),n.classList.remove("dp__animate-out")},250)}}}},{key:"_move",value:function(e){var t,a,n,r,i,o,s,l;"next"!==e&&"prev"!==e||((t=this).animating||(a=t.datepicker.calendarHolder.calendarViews,((n="next"===e)?11<t.viewMonth+1:t.viewMonth-1<0)&&(t.viewYear+=n?1:-1),t.viewMonth=n?11<t.viewMonth+1?0:t.viewMonth+1:t.viewMonth-1<0?11:t.viewMonth-1,t.animating=!0,r="dp__animate-"+(n?"left":"right"),a.wrapper.querySelectorAll(".dudp__calendar").forEach(function(e){e.classList.add(r)}),i=t.viewYear,o=n?t.viewMonth+1:t.viewMonth-1,(n?11<o:o<0)&&(o=n?0:11,i+=n?1:-1),s=t._getDates(i,o),l={wrapper:w.createElem("div",{class:"dudp__calendar"}),header:w.createElem("div",{class:"dudp__cal-month-year"}),weekDays:w.createElem("div",{class:"dudp__weekdays"},w.daysOfWeekDOM.call(t),!0),datesHolder:w.createElem("div",{class:"dudp__dates-holder"})},w.appendTo([w.createElem("span",{class:"cal-month"},t.config.i18n.months[o]),w.createElem("span",{class:"cal-year"},i)],l.header),w.appendTo(s,l.datesHolder),w.appendTo([l.header,l.weekDays,l.datesHolder],l.wrapper),setTimeout(function(){w.appendTo(l.wrapper,a.wrapper,n?void 0:0),a.wrapper.querySelectorAll(".dudp__calendar").forEach(function(e){e.classList.remove(r)}),a.wrapper.removeChild(a.calendars[n?0:2].wrapper),a.calendars[n?"shift":"pop"](),a.calendars[n?"push":"unshift"](l),t.animating=!1},250)))}},{key:"_resetSelection",value:function(){var e,n=this;n.config.range?(e=n.dateFrom?n.dateFrom:new Date,n.rangeFrom=w.dateToJson(n.dateFrom),n.rangeTo=w.dateToJson(n.dateTo),n.viewYear=e.getFullYear(),n.viewMonth=e.getMonth()):(n.selected=w.dateToJson(n.date),n.viewYear=n.selected.year,n.viewMonth=n.selected.month),n.datepicker.calendarHolder.monthsView.querySelectorAll(".dudp__month").forEach(function(e){var t=parseInt(e.dataset.month),a=n.config.range?n.dateFrom?n.dateFrom.getMonth():null:n.selected.month;e.classList[t===a?"add":"remove"]("selected")})}},{key:"_setSelection",value:function(){var e=this.datepicker,t=this.config.range?new Date:w.jsonToDate(this.selected);e.header.selectedYear.innerText=t.getFullYear(),e.header.selectedDate.innerText=w.formatDate.call(this,t,"D, mmm d")}},{key:"setValue",value:function(e){if(void 0===e)throw new Error("Expecting a value.");var t=this,a="string"==typeof e&&""===e,n=null;if(t.config.range){var r=a?[]:e.split(t.config.rangeDelim);if(""!==e&&r.length<2)throw new Error("Invalid date range value.");var i=new Date,o=a?null:w.parseDate.call(t,r[0]).date,s=a?null:w.parseDate.call(t,r[1]).date,l=a?"":w.formatDate.call(t,o,t.config.format),d=a?"":w.formatDate.call(t,o,t.config.outFormat||t.config.format),c=a?"":w.formatDate.call(t,s,t.config.format),_=a?"":w.formatDate.call(t,s,t.config.outFormat||t.config.format),u=a?"":t.config.events&&t.config.events.onRangeFormat?t.formatRange(o,s):r[0]===r[1]?r[0]:e;t.dateFrom=o,t.dateTo=s,t.viewYear=(o||i).getFullYear(),t.viewMonth=(o||i).getMonth(),t.input.value=u,w.setAttributes(t.input,{value:u,"data-range-from":d,"data-range-to":_}),t.fromEl&&(t.fromEl.value=l,w.setAttributes(t.fromEl,{value:l,"data-value":d})),t.toEl&&(t.toEl.value=c,w.setAttributes(t.toEl,{value:c,"data-value":_})),n={_dateFrom:o,dateFrom:a?null:l,_dateTo:s,dateTo:a?null:c,value:u}}else{var p="string"==typeof e?a?new Date:w.parseDate.call(t,e,t.config.format).date:e,m=a?"":w.formatDate.call(t,p,t.config.format);t.date=p,t.viewYear=p.getFullYear(),t.viewMonth=p.getMonth(),t.input.value=m,t.input.setAttribute("value",m),n={_date:a?null:t.date,date:a?null:w.formatDate.call(t,t.date,t.config.outFormat||t.config.format)}}w.triggerChange(t.input,n),t.config.events&&t.config.events.dateChanged&&t.config.events.dateChanged.call(t,n,t)}},{key:"formatDate",value:function(e,t){return w.formatDate.call(this,e,t)}},{key:"formatRange",value:function(e,t){return this.config.events.onRangeFormat.call(this,e,t,this)}},{key:"show",value:function(){var c=this;setTimeout(function(){var e,t,a,n,r,i,o,s,l,d;document.body.setAttribute("datepicker-display","on"),c._resetSelection(),c._setSelection(),c._setupCalendar(),c.datepicker.container.classList.add("dp__open"),c.config.inline&&(e=c.showInFromEl?c.fromEl:c.showInToEl?c.toEl:c.input,t=w.calcOffset(e),a=c.datepicker.wrapper.offsetHeight,n=c.datepicker.wrapper.offsetWidth,r=w.screenDim(),i=t.top+a<r.height,o=t.left+n<r.width,s={},l=window.scrollY,d=window.scrollX,s[i?"top":"bottom"]="".concat(i?t.top-l:t.bottom,"px"),s[o?"left":"right"]="".concat(o?t.left-d:t.right,"px"),c.datepicker.container.removeAttribute("style"),w.setStyles(c.datepicker.container,s)),c.datepicker.wrapper.focus(),c.visible=!0,c.input.blur(),c.config.events&&c.config.events.shown&&c.config.events.shown.call(c,c)},0)}},{key:"hide",value:function(){var e=this;e.datepicker.container.classList.add("dp__closing"),e.visible=!1,e.input.focus(),document.body.removeAttribute("datepicker-display"),setTimeout(function(){e._switchView("calendar"),e.datepicker.container.classList.remove("dp__closing","dp__open"),e.config.events&&e.config.events.hidden&&e.config.events.hidden.call(e,e)},200)}},{key:"destroy",value:function(){this._unbindInput(),this.config.root.removeChild(this.datepicker.container),delete this.input[l]}}])&&n(e.prototype,t),a&&n(e,a),h}();function T(){var a=arguments,n=a[0],r=n instanceof NodeList||Array.isArray(n),i=w.isElement(n),e="string"==typeof n?document.querySelectorAll(n):r?n:i?[n]:document.querySelectorAll(d),o="object"!==t(n)||r||i?a[1]&&"object"===t(a[1])?a[1]:{}:n;Array.from(e).forEach(function(e){var t=e[l];t||(e[l]=t=new c(e,o)),("string"==typeof n||r||i)&&a[1]&&"string"==typeof a[1]&&t[a[1]].apply(t,Array.prototype.slice.call(a).slice(2))})}return Object.defineProperty(T,"i18n",{value:e}),T});